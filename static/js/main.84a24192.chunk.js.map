{"version":3,"sources":["contexts/TimerContext.js","contexts/AudioContext.js","contexts/SpotifyContext.js","components/TimerAndButtons.js","components/TopButtons.js","components/BottomButtons.js","components/AudioUpload.js","components/SpotifyAuthButton.js","contexts/ErrorContext.js","components/Errors.js","App.js","AppWithContext.js","index.js"],"names":["TimerContext","React","createContext","AudioContext","SpotifyContext","TimerAndButtons","Consumer","time","timerMethods","addMinute","subtractMinute","minutes","Math","floor","seconds","document","title","id","className","onClick","TopButtons","switchTimers","started","event","test","target","buttons","getElementsByClassName","i","length","button","classList","remove","add","targetArr","split","filter","el","join","BottomButtons","startTimer","stopTimer","resetTimer","AudioUpload","file","updateAudio","window","addEventListener","preventDefault","onDragEnter","stopPropagation","dropZone","querySelector","setAttribute","label","onDrop","dataTransfer","files","innerText","name","type","accept","onChange","htmlFor","scopes","process","SpotifyAuthButton","url","encodeURIComponent","handleClick","location","value","src","alt","ErrorContext","Errors","errors","map","error","key","App","AppWithContext","a","errLen","getErrLength","state","token","fetch","method","headers","res","ok","json","console","log","setState","message","decrementTimer","clearTimer","timerType","interval","setInterval","audio","play","e","alert","clearInterval","URL","createObjectURL","Audio","this","urlStr","toString","includes","params","grant_type","code","redirect_uri","client_id","client_secret","str","push","body","data","access_token","timeState","Object","assign","Provider","Component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.84a24192.chunk.js","sourcesContent":["import React from 'react';\n\nconst TimerContext = React.createContext();\n\nexport default TimerContext;","import React from 'react';\n\nconst AudioContext = React.createContext();\n\nexport default AudioContext;","import React from 'react';\n\nconst SpotifyContext = React.createContext();\n\nexport default SpotifyContext;","import React from 'react';\nimport TimerContext from '../contexts/TimerContext';\n\nconst TimerAndButtons = () => {\n    return (\n        <TimerContext.Consumer>\n            {({ time, timerMethods: { addMinute, subtractMinute } }) => {\n                const minutes = Math.floor(time / 60);\n                const seconds = time % 60;\n\n                if (seconds < 10) {\n                    document.title = `Panos Timer (${minutes}:0${seconds})`;\n                } else if (minutes === 0 && seconds === 0) {\n                    document.title = `Panos Timer: Time's Up!`\n                } else {\n                    document.title = `Panos Timer (${minutes}:${seconds})`;\n                }\n\n                return (\n                    <section id='timer-container'>\n                        <div className=\"button minute-button\" onClick={subtractMinute}><span id=\"subtract-minute\">-</span></div>\n                        <h1 id='timer'>{seconds < 10 ? `${minutes}:0${seconds}` : `${minutes}:${seconds}`}</h1>\n                        <div className=\"button minute-button\" onClick={addMinute}><span id=\"add-minute\">+</span></div>\n                    </section>\n                )\n            }}\n        </TimerContext.Consumer>\n    )\n}\n\nexport default TimerAndButtons;","import React from 'react';\nimport TimerContext from '../contexts/TimerContext';\n\nconst TopButtons = () => {\n    return (\n        <TimerContext.Consumer>\n            {({ timerMethods: { switchTimers }, started }) => {\n                function handleClick (event) {\n                    if (!/button$/.test(event.target.id) || started) {\n                        return;\n                    }\n\n                    const buttons = document.getElementsByClassName('button');\n\n                    for (let i = 0; i < buttons.length; i++) {\n                        const button = buttons[i];\n                        if (!/^start/.test(button.id) || /^stop/.test(button.id) || /^reset/.test(button.id)) {\n                            buttons[i].classList.remove('selected-button');\n                        }\n                    }\n\n                    event.target.classList.add('selected-button');\n\n                    const targetArr = event.target.id.split('-');\n                    switchTimers(targetArr.filter((el, i) => i !== targetArr.length - 1).join('-'));\n                }\n\n                return (\n                <section id=\"top-buttons\" onClick={handleClick}>\n                <div id=\"pomodoro-button\" className=\"button selected-button\">Pomodoro</div>\n                <div id=\"short-break-button\" className=\"button\">Short Break</div>\n                <div id=\"long-break-button\" className=\"button\">Long Break</div>\n                </section>\n                );\n            }}\n        </TimerContext.Consumer>\n    )\n}\n\nexport default TopButtons;","import React from 'react';\nimport TimerContext from '../contexts/TimerContext';\n\nconst BottomButtons = () => {\n    return (\n        <TimerContext.Consumer>\n            {({ timerMethods: {startTimer, stopTimer, resetTimer} }) => {\n                const handleClick = (event) => {\n                    switch(event.target.id) {\n                        case 'start-button':\n                            startTimer();\n                            return;\n                        case 'stop-button':\n                            stopTimer();\n                            return;\n                        case 'reset-button':\n                            resetTimer();\n                            return;\n                        default: return;\n                    }\n                }\n\n                return (\n                    <section id=\"buttons\" onClick={handleClick}>\n                        <div id=\"start-button\" className=\"button\">Start</div>\n                        <div id=\"stop-button\" className=\"button\">Stop</div>\n                        <div id=\"reset-button\" className=\"button\">Reset</div>\n                    </section>\n                );\n            }}\n        </TimerContext.Consumer>\n    )\n}\n\nexport default BottomButtons;","import React from 'react';\nimport AudioContext from '../contexts/AudioContext';\n\nconst AudioUpload = () => {\n    return (\n        <AudioContext.Consumer>\n            {({ file, updateAudio }) => {\n                window.addEventListener('drop', event => {\n                    event.preventDefault();\n                });\n\n                window.addEventListener('dragover', event => {\n                    event.preventDefault();\n                });\n\n                const handleFileChange = (event) => {\n                    const file = document.querySelector('#audio-file').files[0];\n                    updateAudio(file);\n                    document.querySelector('label').innerText = `Chosen file: ${file.name}`;\n                }\n\n                const handleDragEnter = (event) => {\n                    event.stopPropagation();\n                    event.preventDefault();\n                    const dropZone = document.querySelector('#audio-upload');\n                    dropZone.setAttribute('class', 'dragHover');\n                    const label = document.querySelector('label');\n                    label.classList.add('no-events');\n\n                    dropZone.addEventListener('dragleave', event => {\n                        event.stopPropagation();\n                        event.preventDefault();\n                        dropZone.classList.remove('dragHover');\n                        label.classList.remove('no-events');\n                    });\n                }\n\n                const handleDrop = (event) => {\n                    event.stopPropagation();\n                    event.preventDefault();\n\n                    document.querySelector('#audio-upload').classList.remove('dragHover');\n                    document.querySelector('label').classList.remove('no-events');\n\n                    const file = event.dataTransfer.files[0];\n                    updateAudio(file);\n                    document.querySelector('label').innerText = `Chosen file: ${file.name}`;\n                }\n\n                return (\n                    <section id=\"audio-upload\" onDragEnter={handleDragEnter} onDrop={handleDrop}>\n                        <h3 id=\"upload-header\" className=\"no-events\">Choose or drag and drop an audio file to play when the timer expires</h3>\n                        <input type=\"file\" id=\"audio-file\" accept=\"audio/*\" className=\"hidden no-events\" onChange={handleFileChange} />\n                        <label htmlFor=\"audio-file\">Choose a file</label>\n                    </section>\n                )\n            }}\n        </AudioContext.Consumer>\n    )\n}\n\nexport default AudioUpload;","import React from 'react';\nimport SpotifyContext from '../contexts/SpotifyContext';\n\nconst scopes = process.env.REACT_APP_SPOTIFY_SCOPES\nconst myClientId = process.env.REACT_APP_SPOTIFY_CLIENT_ID;\n\nconst SpotifyAuthButton = () => {\n    const url = `https://accounts.spotify.com/authorize?response_type=code&client_id=` + myClientId + (scopes ? '&scope=' + encodeURIComponent(scopes): \"\") + '&show_dialog=' + encodeURIComponent(true) + '&redirect_uri=' + encodeURIComponent(process.env.REACT_APP_REDIRECT_URI);\n\n    const handleClick = () => {\n        window.location = url;\n    }\n    return (\n        <SpotifyContext.Consumer>\n            {\n                value => {\n                    return (\n                        <button id='spotify-log-in' onClick={handleClick} className={value ? 'no-events' : 'button'}>\n                            <img id='spotify-logo' src='https://1000logos.net/wp-content/uploads/2017/08/Spotify-Logo.png' alt='Spotify logo'/>\n                            {value ? <span id='spotify-text'>Logged In</span> : <span id='spotify-text'>Log In to Spotify</span>}\n                        </button>\n                    )\n                }\n            }\n        </SpotifyContext.Consumer>\n    )\n}\n\nexport default SpotifyAuthButton;","import React from 'react';\n\nconst ErrorContext = React.createContext();\n\nexport default ErrorContext;","import React from 'react';\nimport ErrorContext from '../contexts/ErrorContext';\n\nconst Errors = () => {\n    return (\n        <ErrorContext.Consumer>\n            {(errors) => {\n               if (errors.length) {\n                   return (\n                   <div id='error-container'>\n                       <ul>\n                           {errors.map((error, i) => {\n                               return (\n                               <li key={`error-${i + 1}`}>{error}</li>\n                               );\n                           })}\n                       </ul>\n                   </div>\n                   );\n               } else {\n                   return (\n                   <div id='error-container' className='hidden'>\n                   </div>\n                   );\n               }\n            }}\n        </ErrorContext.Consumer>\n    )\n}\n\nexport default Errors;","import React from 'react';\nimport TimerAndButtons from './components/TimerAndButtons';\nimport TopButtons from './components/TopButtons';\nimport BottomButtons from './components/BottomButtons';\nimport AudioUpload from './components/AudioUpload';\nimport SpotifyAuthButton from './components/SpotifyAuthButton';\nimport Errors from './components/Errors';\n\nfunction App() {\n  return (\n    <>\n    <div id='top-container'>\n    <AudioUpload />\n    <Errors />\n    <SpotifyAuthButton />\n    </div>\n    <div id='center-screen'>\n      <TopButtons />\n      <TimerAndButtons />\n      <BottomButtons />\n    </div>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport TimerContext from './contexts/TimerContext';\nimport AudioContext from './contexts/AudioContext';\nimport SpotifyContext from './contexts/SpotifyContext';\nimport App from './App';\nimport ErrorContext from './contexts/ErrorContext';\n\nclass AppWithContext extends React.Component {\n    constructor() {\n        super();\n\n        this.state = {\n            started: false,\n            timerType: \"pomodoro\",\n            time: 1500,\n            timerMethods: {\n                startTimer: this.startTimer,\n                stopTimer: this.stopTimer,\n                resetTimer: this.resetTimer,\n                decrementTimer: this.decrementTimer,\n                switchTimers: this.switchTimers,\n                addMinute: this.addMinute,\n                subtractMinute: this.subtractMinute\n            },\n            audio: {\n                file: null,\n                updateAudio: this.updateAudio\n            },\n            token: null,\n            errors: []\n        }\n    }\n\n    async componentDidMount() {\n        if (this.state.token) {\n            return;\n        }\n\n        let urlStr = window.location.toString()\n\n        if (urlStr.includes('?code=')) {\n            const params = {\n                grant_type: 'authorization_code',\n                code: urlStr.split('?code=')[1],\n                redirect_uri: process.env.REACT_APP_REDIRECT_URI,\n                client_id: process.env.REACT_APP_SPOTIFY_CLIENT_ID,\n                client_secret: process.env.REACT_APP_SPOTIFY_CLIENT_SECRET\n            }\n\n            let str = [];\n\n            for (let key in params) {\n                str.push(`${key}=${encodeURIComponent(params[key])}`);\n            }\n\n            try {\n                console.log(str);\n                const res = await fetch('https://accounts.spotify.com/api/token', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/x-www-form-urlencoded'\n                    },\n                    body: str.join('&')\n                });\n\n                const data = await res.json();\n\n                if (!res.ok) {\n                    throw data;\n                }\n\n                this.setState({ token: data.access_token });\n            } catch (e) {\n                window.location = 'https://panosphl.github.io/spotify-react-pomodoro-timer';\n            }\n        }\n    }\n\n    startTimer = async () => {\n        const errLen = this.getErrLength();\n\n        if (this.state.started) {\n            return;\n        }\n\n        if (this.state.token) {\n            try {\n                const res = await fetch('https://api.spotify.com/v1/me/player/play', {\n                    method: 'PUT',\n                    headers: {\n                        'Authorization': `Bearer ${this.state.token}`\n                    }\n                });\n\n                if (!res.ok) {\n                    throw await res.json();\n                }\n\n            } catch (e) {\n                console.log(e);\n                this.setState({ errors: [...this.state.errors, e.error.message]})\n            }\n        }\n\n        let errors;\n\n        if (this.state.errors.length > errLen) {\n            errors = this.state.errors;\n        } else {\n            errors = [];\n        }\n\n        this.setState({ started: true, errors }, () => {\n            this.decrementTimer();\n        });\n\n    }\n\n    stopTimer = async () => {\n        const errLen = this.getErrLength();\n\n        if (this.state.token) {\n            try {\n                const res = await fetch('https://api.spotify.com/v1/me/player/pause', {\n                method: 'PUT',\n                headers: {\n                    'Authorization': `Bearer ${this.state.token}`\n                }\n            });\n\n            if (!res.ok) {\n                throw await res.json();\n            }\n            } catch (e) {\n                this.setState({ errors: [...this.state.errors, e.error.message] });\n            }\n        }\n\n        let errors;\n\n        if (this.state.errors.length > errLen) {\n            errors = this.state.errors;\n        } else {\n            errors = [];\n        }\n\n        this.setState({ started: false, errors }, () => {\n            this.clearTimer();\n        });\n    }\n\n    addMinute = () => {\n        this.setState({ time: this.state.time + 60 });\n    }\n\n    subtractMinute = () => {\n        if (this.state.time < 60) {\n            this.setState({ time: 0 });\n            return;\n        }\n        this.setState({ time: this.state.time - 60 });\n    }\n\n    resetTimer = () => {\n        let errors = [];\n\n        if (this.state.started) {\n            return;\n        }\n\n        switch (this.state.timerType) {\n            case 'pomodoro':\n                this.setState({ time: 1500, errors });\n                return;\n            case 'short-break':\n                this.setState({ time: 300, errors });\n                return;\n            case 'long-break':\n                this.setState({ time: 600, errors });\n                return;\n            default: return;\n        }\n    }\n\n    decrementTimer = () => {\n        if (!this.state.started) {\n            return;\n        }\n\n        this.interval = setInterval(() => {\n            if (this.state.time === 0) {\n                try {\n                    this.state.audio.file.play();\n                    this.stopTimer();\n                    return;\n                } catch (e) {\n                    alert('There was an issue playing your audio file! Please provide one.')\n                }\n            }\n\n            this.setState({ time: this.state.time - 1 });\n        }, 1000);\n    }\n\n    clearTimer = () => {\n        clearInterval(this.interval);\n        this.interval = null;\n    }\n\n    switchTimers = (type) => {\n        if (this.state.started) {\n            return;\n        }\n\n        switch (type) {\n            case 'pomodoro':\n                this.setState({ timerType: type, time: 1500 });\n                return;\n            case 'short-break':\n                this.setState({ timerType: type, time: 300 });\n                return;\n            case 'long-break':\n                this.setState({ timerType: type, time: 600 });\n                return;\n            default: return;\n        }\n    }\n\n    updateAudio = (file) => {\n        let url = URL.createObjectURL(file);\n        let audio = new Audio(url);\n        this.setState({ audio: { file: audio, updateAudio: this.updateAudio }});\n    }\n\n    getErrLength() {\n        return this.state.errors.length;\n    }\n\n    render() {\n        const timeState = Object.assign({}, this.state);\n        delete timeState.audio;\n\n        return (\n            <ErrorContext.Provider value={this.state.errors}>\n            <TimerContext.Provider value={timeState}>\n                <AudioContext.Provider value={this.state.audio}>\n                    <SpotifyContext.Provider value={this.state.token}>\n                    <App />\n                    </SpotifyContext.Provider>\n                </AudioContext.Provider>\n            </TimerContext.Provider>\n            </ErrorContext.Provider>\n        )\n    }\n}\n\nexport default AppWithContext;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport AppWithContext from './AppWithContext';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppWithContext />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}